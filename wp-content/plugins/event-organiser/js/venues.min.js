var map,marker,eo_venue=eo_venue||{marker:false};
jQuery(document).ready(function(){typeof EO_Venue!="undefined"&&postboxes.add_postbox_toggles(pagenow);if(typeof google!=="undefined"){var c=jQuery("#eo_venue_Lat").val(),a=jQuery("#eo_venue_Lng").val();if(typeof c!=="undefined"&&typeof a!=="undefined"){eo_initialize_map(c,a);if(c==0&&a==0){if(typeof EO_Venue!="undefined"){var b=EO_Venue.location.split("/");b=b[b.length-1]}typeof b!="undefined"&&b?eventorganiser_code_address(b):map.setZoom(1)}jQuery(".eo_addressInput").change(function(){var d=[];
jQuery(".eo_addressInput").each(function(){d.push(jQuery(this).val())});eventorganiser_code_address(d.join(", "))})}}});
function eo_initialize_map(c,a){if(typeof google!=="undefined"){c=new google.maps.LatLng(c,a);a={zoom:15,center:c,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("venuemap"),a);marker=new google.maps.Marker({position:c,map:map,draggable:typeof EO_Venue!="undefined"?true:false,icon:eo_venue.marker?eo_venue.marker:null});typeof EO_Venue!="undefined"&&google.maps.event.addListener(marker,"dragend",function(b){jQuery("#eo_venue_Lat").val(b.latLng.lat().toFixed(6));
jQuery("#eo_venue_Lng").val(b.latLng.lng().toFixed(6));map.setCenter(marker.position)})}}
function eventorganiser_code_address(c){(new google.maps.Geocoder).geocode({address:c},function(a,b){if(b==google.maps.GeocoderStatus.OK){marker.setMap(null);map.setCenter(a[0].geometry.location);marker=new google.maps.Marker({map:map,position:a[0].geometry.location,draggable:typeof EO_Venue!="undefined"?true:false,icon:eo_venue.marker?eo_venue.marker:null});map.setZoom(15);typeof EO_Venue!="undefined"&&google.maps.event.addListener(marker,"dragend",function(d){jQuery("#eo_venue_Lat").val(d.latLng.lat().toFixed(6));
jQuery("#eo_venue_Lng").val(d.latLng.lng().toFixed(6));map.setCenter(marker.position)});jQuery("#eo_venue_Lat").val(a[0].geometry.location.lat());jQuery("#eo_venue_Lng").val(a[0].geometry.location.lng())}})};
